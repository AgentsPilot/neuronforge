{
  "plugin": {
    "name": "google-calendar",
    "version": "1.0.0",
    "description": "Manage events, meetings, and schedules in Google Calendar",
    "context": "Use for fetching calendar events, creating meetings, scheduling appointments, setting reminders, managing attendees, and organizing time-based activities for agents",
    "icon": "<Calendar className='w-5 h-5 text-blue-500'/>",
    "category": "communication",
    "isPopular": true,
    "auth_config": {
      "auth_type": "oauth2_google",
      "client_id": "${GOOGLE_CLIENT_ID}",
      "client_secret": "${GOOGLE_CLIENT_SECRET}",
      "redirect_uri": "${NEXT_PUBLIC_APP_URL}/oauth/callback/google-calendar",
      "auth_url": "https://accounts.google.com/o/oauth2/v2/auth",
      "token_url": "https://oauth2.googleapis.com/token",
      "refresh_url": "https://oauth2.googleapis.com/token",
      "profile_url": "https://www.googleapis.com/oauth2/v2/userinfo",
      "required_scopes": [
        "openid",
        "email",
        "profile",
        "https://www.googleapis.com/auth/calendar",
        "https://www.googleapis.com/auth/calendar.events"
      ]
    }
  },
  "actions": {
    "list_events": {
      "description": "List calendar events within a specified time range",
      "usage_context": "When user wants to fetch upcoming events, check availability, see scheduled meetings, or retrieve calendar data for a time period",
      "parameters": {
        "type": "object",
        "required": ["time_min"],
        "properties": {
          "calendar_id": {
            "type": "string",
            "default": "primary",
            "description": "Calendar identifier (use 'primary' for user's primary calendar or specific calendar email)",
            "x-dynamic-options": {
              "source": "list_calendars",
              "description": "Fetches available calendars dynamically"
            }
          },
          "time_min": {
            "type": "string",
            "description": "Start of time range (ISO 8601 format, e.g., '2024-01-01T00:00:00Z')"
          },
          "time_max": {
            "type": "string",
            "description": "End of time range (ISO 8601 format, optional - defaults to unbounded)"
          },
          "max_results": {
            "type": "number",
            "default": 50,
            "description": "Maximum number of events to return (max 2500)"
          },
          "single_events": {
            "type": "boolean",
            "default": true,
            "description": "Whether to expand recurring events into individual instances"
          },
          "order_by": {
            "type": "string",
            "enum": ["startTime", "updated"],
            "default": "startTime",
            "description": "Order results by start time or last updated time"
          }
        }
      },
      "rules": {
        "limits": {
          "max_results_limit": {
            "condition": "max_results > 2500",
            "action": "block",
            "message": "Cannot retrieve more than 2,500 events at once. Please reduce max_results."
          }
        },
        "confirmations": {
          "large_fetch": {
            "condition": "max_results > 500",
            "action": "confirm",
            "message": "Fetch {max_results} events? This may take a moment to process."
          }
        }
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "calendar_id": {
            "type": "string",
            "description": "The calendar identifier that was queried"
          },
          "event_count": {
            "type": "integer",
            "description": "Number of events returned"
          },
          "events": {
            "type": "array",
            "description": "List of calendar events",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "description": "Unique event identifier"
                },
                "summary": {
                  "type": "string",
                  "description": "Event title/summary"
                },
                "description": {
                  "type": "string",
                  "description": "Event description"
                },
                "location": {
                  "type": "string",
                  "description": "Event location"
                },
                "start": {
                  "type": "string",
                  "description": "Event start time (ISO 8601 format)"
                },
                "end": {
                  "type": "string",
                  "description": "Event end time (ISO 8601 format)"
                },
                "attendees": {
                  "type": "array",
                  "description": "List of event attendees",
                  "items": {
                    "type": "object",
                    "properties": {
                      "email": {
                        "type": "string",
                        "description": "Attendee email address"
                      },
                      "response_status": {
                        "type": "string",
                        "description": "Attendee response status (needsAction, declined, tentative, accepted)"
                      }
                    }
                  }
                },
                "organizer": {
                  "type": "string",
                  "description": "Organizer email address"
                },
                "html_link": {
                  "type": "string",
                  "description": "URL to view event in Google Calendar"
                },
                "conference_data": {
                  "type": "object",
                  "description": "Conference/meeting data if present"
                }
              }
            }
          },
          "time_range": {
            "type": "object",
            "description": "The time range that was queried",
            "properties": {
              "start": {
                "type": "string",
                "description": "Start of time range (ISO 8601)"
              },
              "end": {
                "type": "string",
                "description": "End of time range (ISO 8601) or 'unbounded'"
              }
            }
          },
          "retrieved_at": {
            "type": "string",
            "description": "Timestamp when events were retrieved (ISO 8601)"
          }
        }
      },
      "output_guidance": {
        "success_description": "Returns calendar events within the specified time range with full details including attendees and conference links.",
        "sample_output": {
          "calendar_id": "primary",
          "event_count": 2,
          "events": [
            {
              "id": "abc123xyz",
              "summary": "Team Meeting",
              "description": "Weekly sync",
              "location": "Conference Room A",
              "start": "2024-01-15T10:00:00Z",
              "end": "2024-01-15T11:00:00Z",
              "attendees": [
                {"email": "john@example.com", "response_status": "accepted"}
              ],
              "organizer": "jane@example.com",
              "html_link": "https://calendar.google.com/event?eid=abc123"
            }
          ],
          "time_range": {"start": "2024-01-15T00:00:00Z", "end": "2024-01-16T00:00:00Z"},
          "retrieved_at": "2024-01-15T08:30:00Z"
        },
        "common_errors": {
          "auth_failed": "Your Google Calendar connection has expired. Please go to Settings → Connected Apps to reconnect Google Calendar.",
          "calendar_not_found": "The calendar was not found. Please check the calendar ID and ensure you have access.",
          "invalid_time_format": "The time format is invalid. Use ISO 8601 format like '2024-01-01T00:00:00Z'.",
          "permission_denied": "You don't have permission to access this calendar. Please request access from the owner.",
          "api_rate_limit": "Too many requests in a short time. Please wait a moment and try again.",
          "insufficient_permissions": "Google Calendar permissions are insufficient. Please reconnect with full calendar access."
        }
      }
    },
    "create_event": {
      "description": "Create a new calendar event or meeting",
      "usage_context": "When user wants to schedule a meeting, create an appointment, add calendar events, or set up recurring events with attendees and reminders",
      "parameters": {
        "type": "object",
        "required": ["summary", "start_time", "end_time"],
        "properties": {
          "calendar_id": {
            "type": "string",
            "default": "primary",
            "description": "Calendar identifier to create event in",
            "x-dynamic-options": {
              "source": "list_calendars",
              "description": "Fetches available calendars dynamically"
            }
          },
          "summary": {
            "type": "string",
            "description": "Event title/summary"
          },
          "description": {
            "type": "string",
            "description": "Event description or notes"
          },
          "location": {
            "type": "string",
            "description": "Event location (address, room name, etc.)"
          },
          "start_time": {
            "type": "string",
            "description": "Event start time (ISO 8601 format, e.g., '2024-01-15T10:00:00Z')"
          },
          "end_time": {
            "type": "string",
            "description": "Event end time (ISO 8601 format)"
          },
          "attendees": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of attendee email addresses"
          },
          "reminders": {
            "type": "object",
            "properties": {
              "use_default": {
                "type": "boolean",
                "default": true,
                "description": "Use calendar's default reminders"
              },
              "overrides": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "method": {
                      "type": "string",
                      "enum": ["email", "popup"]
                    },
                    "minutes": {
                      "type": "number"
                    }
                  }
                },
                "description": "Custom reminder settings (e.g., [{method: 'email', minutes: 60}])"
              }
            }
          },
          "send_notifications": {
            "type": "boolean",
            "default": true,
            "description": "Send email notifications to attendees"
          },
          "conference_solution": {
            "type": "string",
            "enum": ["hangoutsMeet", "none"],
            "default": "none",
            "description": "Generate Google Meet link for the event"
          }
        }
      },
      "rules": {
        "limits": {
          "max_attendees": {
            "condition": "attendee_count > 100",
            "action": "block",
            "message": "Cannot add more than 100 attendees to a single event."
          }
        },
        "confirmations": {
          "many_attendees": {
            "condition": "attendee_count > 20",
            "action": "confirm",
            "message": "Create event with {attendee_count} attendees? Email notifications will be sent."
          },
          "send_notifications_confirm": {
            "condition": "send_notifications == true && attendee_count > 0",
            "action": "confirm",
            "message": "Send calendar invitations to {attendee_count} attendees?"
          }
        }
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "event_id": {
            "type": "string",
            "description": "Unique identifier for the created event"
          },
          "summary": {
            "type": "string",
            "description": "Event title/summary"
          },
          "start_time": {
            "type": "string",
            "description": "Event start time (ISO 8601 format)"
          },
          "end_time": {
            "type": "string",
            "description": "Event end time (ISO 8601 format)"
          },
          "html_link": {
            "type": "string",
            "description": "URL to view event in Google Calendar"
          },
          "hangout_link": {
            "type": "string",
            "description": "Google Hangout link if conference was created"
          },
          "meet_link": {
            "type": "string",
            "description": "Google Meet video call link if conference was created"
          },
          "attendee_count": {
            "type": "integer",
            "description": "Number of attendees added to the event"
          },
          "created_at": {
            "type": "string",
            "description": "Timestamp when event was created (ISO 8601)"
          }
        }
      },
      "output_guidance": {
        "success_description": "Returns the created event details including ID, calendar link, and any conference links.",
        "sample_output": {
          "event_id": "abc123xyz",
          "summary": "Team Meeting",
          "start_time": "2024-01-15T10:00:00Z",
          "end_time": "2024-01-15T11:00:00Z",
          "html_link": "https://calendar.google.com/event?eid=abc123",
          "meet_link": "https://meet.google.com/abc-defg-hij",
          "attendee_count": 5,
          "created_at": "2024-01-14T15:30:00Z"
        },
        "common_errors": {
          "auth_failed": "Your Google Calendar connection has expired. Please reconnect in Settings → Connected Apps.",
          "calendar_not_found": "The calendar was not found. Please check the calendar ID.",
          "invalid_time_format": "The time format is invalid. Use ISO 8601 format like '2024-01-15T10:00:00Z'.",
          "invalid_attendees": "One or more attendee email addresses are invalid.",
          "permission_denied": "You don't have permission to create events on this calendar.",
          "api_rate_limit": "Too many event creation requests. Please wait a moment and try again.",
          "insufficient_permissions": "Google Calendar write permissions are insufficient. Please reconnect with full access."
        }
      }
    },
    "update_event": {
      "description": "Update an existing calendar event",
      "usage_context": "When user wants to modify event details, reschedule meetings, change attendees, or update event information",
      "parameters": {
        "type": "object",
        "required": ["event_id"],
        "properties": {
          "calendar_id": {
            "type": "string",
            "default": "primary",
            "description": "Calendar identifier containing the event",
            "x-dynamic-options": {
              "source": "list_calendars",
              "description": "Fetches available calendars dynamically"
            }
          },
          "event_id": {
            "type": "string",
            "description": "ID of the event to update"
          },
          "summary": {
            "type": "string",
            "description": "New event title/summary"
          },
          "description": {
            "type": "string",
            "description": "New event description"
          },
          "location": {
            "type": "string",
            "description": "New event location"
          },
          "start_time": {
            "type": "string",
            "description": "New start time (ISO 8601 format)"
          },
          "end_time": {
            "type": "string",
            "description": "New end time (ISO 8601 format)"
          },
          "attendees": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Updated list of attendee email addresses"
          },
          "send_notifications": {
            "type": "boolean",
            "default": false,
            "description": "Send email notifications about the update to attendees"
          }
        }
      },
      "rules": {
        "limits": {},
        "confirmations": {
          "send_update_notifications": {
            "condition": "send_notifications == true",
            "action": "confirm",
            "message": "Send update notifications to all attendees?"
          }
        }
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "event_id": {
            "type": "string",
            "description": "Unique identifier of the updated event"
          },
          "summary": {
            "type": "string",
            "description": "Updated event title/summary"
          },
          "start_time": {
            "type": "string",
            "description": "Event start time (ISO 8601 format)"
          },
          "end_time": {
            "type": "string",
            "description": "Event end time (ISO 8601 format)"
          },
          "html_link": {
            "type": "string",
            "description": "URL to view event in Google Calendar"
          },
          "updated_at": {
            "type": "string",
            "description": "Timestamp when event was updated (ISO 8601)"
          }
        }
      },
      "output_guidance": {
        "success_description": "Returns the updated event details with new values and timestamp.",
        "sample_output": {
          "event_id": "abc123xyz",
          "summary": "Updated Team Meeting",
          "start_time": "2024-01-15T14:00:00Z",
          "end_time": "2024-01-15T15:00:00Z",
          "html_link": "https://calendar.google.com/event?eid=abc123",
          "updated_at": "2024-01-14T16:00:00Z"
        },
        "common_errors": {
          "auth_failed": "Your Google Calendar connection has expired. Please reconnect in Settings → Connected Apps.",
          "event_not_found": "The event was not found. Please check the event ID.",
          "calendar_not_found": "The calendar was not found. Please check the calendar ID.",
          "invalid_time_format": "The time format is invalid. Use ISO 8601 format.",
          "permission_denied": "You don't have permission to edit this event.",
          "api_rate_limit": "Too many update requests. Please wait a moment and try again.",
          "insufficient_permissions": "Google Calendar write permissions are insufficient. Please reconnect with full access."
        }
      }
    },
    "delete_event": {
      "description": "Delete a calendar event",
      "usage_context": "When user wants to cancel meetings, remove events, or delete calendar entries",
      "parameters": {
        "type": "object",
        "required": ["event_id"],
        "properties": {
          "calendar_id": {
            "type": "string",
            "default": "primary",
            "description": "Calendar identifier containing the event",
            "x-dynamic-options": {
              "source": "list_calendars",
              "description": "Fetches available calendars dynamically"
            }
          },
          "event_id": {
            "type": "string",
            "description": "ID of the event to delete"
          },
          "send_notifications": {
            "type": "boolean",
            "default": false,
            "description": "Send cancellation notifications to attendees"
          }
        }
      },
      "rules": {
        "limits": {},
        "confirmations": {
          "delete_confirmation": {
            "condition": "event_id != null",
            "action": "confirm",
            "message": "Delete this calendar event? This action cannot be undone."
          },
          "send_cancellation": {
            "condition": "send_notifications == true",
            "action": "confirm",
            "message": "Send cancellation notifications to all attendees?"
          }
        }
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "event_id": {
            "type": "string",
            "description": "ID of the deleted event"
          },
          "deleted": {
            "type": "boolean",
            "description": "Whether the event was successfully deleted"
          },
          "deleted_at": {
            "type": "string",
            "description": "Timestamp when event was deleted (ISO 8601)"
          }
        }
      },
      "output_guidance": {
        "success_description": "Confirms the event was deleted with the event ID and timestamp.",
        "sample_output": {
          "event_id": "abc123xyz",
          "deleted": true,
          "deleted_at": "2024-01-14T16:30:00Z"
        },
        "common_errors": {
          "auth_failed": "Your Google Calendar connection has expired. Please reconnect in Settings → Connected Apps.",
          "event_not_found": "The event was not found. It may have already been deleted.",
          "calendar_not_found": "The calendar was not found. Please check the calendar ID.",
          "permission_denied": "You don't have permission to delete this event.",
          "api_rate_limit": "Too many deletion requests. Please wait a moment and try again.",
          "insufficient_permissions": "Google Calendar write permissions are insufficient. Please reconnect with full access."
        }
      }
    },
    "get_event_details": {
      "description": "Get detailed information about a specific calendar event",
      "usage_context": "When user wants to view event details, check meeting information, or retrieve specific event data",
      "parameters": {
        "type": "object",
        "required": ["event_id"],
        "properties": {
          "calendar_id": {
            "type": "string",
            "default": "primary",
            "description": "Calendar identifier containing the event",
            "x-dynamic-options": {
              "source": "list_calendars",
              "description": "Fetches available calendars dynamically"
            }
          },
          "event_id": {
            "type": "string",
            "description": "ID of the event to retrieve"
          }
        }
      },
      "rules": {
        "limits": {},
        "confirmations": {}
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "event_id": {
            "type": "string",
            "description": "Unique event identifier"
          },
          "summary": {
            "type": "string",
            "description": "Event title/summary"
          },
          "description": {
            "type": "string",
            "description": "Event description"
          },
          "location": {
            "type": "string",
            "description": "Event location"
          },
          "start": {
            "type": "string",
            "description": "Event start time (ISO 8601 format)"
          },
          "end": {
            "type": "string",
            "description": "Event end time (ISO 8601 format)"
          },
          "attendees": {
            "type": "array",
            "description": "List of event attendees with details",
            "items": {
              "type": "object",
              "properties": {
                "email": {
                  "type": "string",
                  "description": "Attendee email address"
                },
                "display_name": {
                  "type": "string",
                  "description": "Attendee display name"
                },
                "organizer": {
                  "type": "boolean",
                  "description": "Whether attendee is the organizer"
                },
                "response_status": {
                  "type": "string",
                  "description": "Attendee response status (needsAction, declined, tentative, accepted)"
                },
                "optional": {
                  "type": "boolean",
                  "description": "Whether attendee is optional"
                }
              }
            }
          },
          "organizer": {
            "type": "object",
            "description": "Event organizer information",
            "properties": {
              "email": {
                "type": "string",
                "description": "Organizer email address"
              },
              "display_name": {
                "type": "string",
                "description": "Organizer display name"
              }
            }
          },
          "reminders": {
            "type": "object",
            "description": "Event reminder settings"
          },
          "html_link": {
            "type": "string",
            "description": "URL to view event in Google Calendar"
          },
          "hangout_link": {
            "type": "string",
            "description": "Google Hangout link if present"
          },
          "meet_link": {
            "type": "string",
            "description": "Google Meet video call link if present"
          },
          "status": {
            "type": "string",
            "description": "Event status (confirmed, tentative, cancelled)"
          },
          "created": {
            "type": "string",
            "description": "When the event was created (ISO 8601)"
          },
          "updated": {
            "type": "string",
            "description": "When the event was last updated (ISO 8601)"
          },
          "retrieved_at": {
            "type": "string",
            "description": "Timestamp when details were retrieved (ISO 8601)"
          }
        }
      },
      "output_guidance": {
        "success_description": "Returns complete event details including attendees, organizer, reminders, and conference links.",
        "sample_output": {
          "event_id": "abc123xyz",
          "summary": "Team Meeting",
          "description": "Weekly team sync",
          "location": "Conference Room A",
          "start": "2024-01-15T10:00:00Z",
          "end": "2024-01-15T11:00:00Z",
          "attendees": [
            {
              "email": "john@example.com",
              "display_name": "John Doe",
              "organizer": false,
              "response_status": "accepted",
              "optional": false
            }
          ],
          "organizer": {
            "email": "jane@example.com",
            "display_name": "Jane Smith"
          },
          "reminders": {"useDefault": true},
          "html_link": "https://calendar.google.com/event?eid=abc123",
          "meet_link": "https://meet.google.com/abc-defg-hij",
          "status": "confirmed",
          "created": "2024-01-10T09:00:00Z",
          "updated": "2024-01-14T12:00:00Z",
          "retrieved_at": "2024-01-14T16:00:00Z"
        },
        "common_errors": {
          "auth_failed": "Your Google Calendar connection has expired. Please reconnect in Settings → Connected Apps.",
          "event_not_found": "The event was not found. Please check the event ID and ensure you have access.",
          "calendar_not_found": "The calendar was not found. Please check the calendar ID.",
          "permission_denied": "You don't have permission to access this event.",
          "api_rate_limit": "Too many requests. Please wait a moment and try again.",
          "insufficient_permissions": "Google Calendar read permissions are insufficient. Please reconnect with full access."
        }
      }
    }
  }
}
