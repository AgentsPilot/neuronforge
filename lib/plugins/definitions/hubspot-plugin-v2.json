{
  "plugin": {
    "name": "hubspot",
    "version": "1.0.0",
    "description": "Access HubSpot CRM data including contacts, deals, companies, and activity timelines",
    "context": "Use for retrieving contact information, viewing deal pipelines, accessing customer activity history, searching CRM records, and integrating HubSpot customer data with agent workflows",
    "icon": "<Calendar className='w-5 h-5 text-orange-600'/>",
    "category": "crm",
    "isPopular": true,
    "auth_config": {
      "auth_type": "oauth2_hubspot",
      "client_id": "${HUBSPOT_CLIENT_ID}",
      "client_secret": "${HUBSPOT_CLIENT_SECRET}",
      "redirect_uri": "${NEXT_PUBLIC_APP_URL}/oauth/callback/hubspot",
      "auth_url": "https://app.hubspot.com/oauth/authorize",
      "token_url": "https://api.hubapi.com/oauth/v1/token",
      "refresh_url": "https://api.hubapi.com/oauth/v1/token",
      "required_scopes": [
        "oauth",
        "crm.objects.contacts.read",
        "crm.objects.contacts.write",
        "crm.objects.deals.read",
        "crm.objects.deals.write",
        "crm.objects.companies.read",
        "crm.objects.owners.read",
        "crm.schemas.contacts.read",
        "crm.schemas.deals.read"
      ]
    }
  },
  "actions": {
    "get_contact": {
      "description": "Retrieve detailed contact information by ID or email address",
      "usage_context": "Use when you need to look up a specific contact's details, properties, or recent activity summary. Can search by contact ID or email address.",
      "parameters": {
        "type": "object",
        "required": ["contact_identifier"],
        "properties": {
          "contact_identifier": {
            "type": "string",
            "description": "The contact ID or email address to look up"
          },
          "identifier_type": {
            "type": "string",
            "description": "Type of identifier: 'id' or 'email' (default: 'email')",
            "default": "email"
          },
          "properties": {
            "type": "array",
            "description": "Optional: List of specific contact properties to retrieve (e.g., ['firstname', 'lastname', 'phone', 'company']). If not specified, returns all properties."
          },
          "include_associations": {
            "type": "boolean",
            "description": "Include associated records like companies and deals (default: false)",
            "default": false
          }
        }
      },
      "rules": {
        "limits": {},
        "confirmations": {}
      },
      "output_schema": {
        "type": "object",
        "description": "Contact information with properties and optional associations",
        "properties": {
          "success": { "type": "boolean", "description": "Whether the request was successful" },
          "data": {
            "type": "object",
            "description": "Contact data",
            "properties": {
              "contact_id": { "type": "string", "description": "HubSpot contact ID" },
              "properties": { "type": "object", "description": "Contact properties (firstname, lastname, email, etc.)" },
              "created_at": { "type": "string", "description": "ISO 8601 timestamp of contact creation" },
              "updated_at": { "type": "string", "description": "ISO 8601 timestamp of last update" },
              "archived": { "type": "boolean", "description": "Whether the contact is archived" },
              "associations": {
                "type": "object",
                "description": "Associated records (if include_associations=true)",
                "properties": {
                  "deals": { "type": "array", "description": "Associated deal IDs" },
                  "companies": { "type": "array", "description": "Associated company IDs" }
                }
              }
            }
          },
          "message": { "type": "string", "description": "Success message" }
        }
      },
      "output_guidance": {
        "success_description": "Returns contact information with properties and optional associations",
        "sample_output": {
          "success": true,
          "data": {
            "contact_id": "123456",
            "properties": {
              "firstname": "John",
              "lastname": "Smith",
              "email": "john@example.com",
              "company": "Acme Corp"
            },
            "created_at": "2025-01-01T00:00:00.000Z",
            "updated_at": "2025-01-15T00:00:00.000Z",
            "archived": false
          },
          "message": "Contact retrieved successfully"
        },
        "common_errors": {
          "contact_not_found": "Contact not found. Verify the contact ID or email address is correct.",
          "invalid_property": "One or more requested properties do not exist. Check property names.",
          "api_rate_limit": "HubSpot API rate limit exceeded. Please wait a moment and try again.",
          "insufficient_permissions": "Missing required permissions to access contact data. Contact may require additional scopes."
        }
      }
    },
    "get_contact_deals": {
      "description": "Get all deals associated with a specific contact",
      "usage_context": "Use to view a contact's deal pipeline, including deal amounts, stages, close dates, and deal ownership. Useful for understanding a contact's revenue opportunities.",
      "parameters": {
        "type": "object",
        "required": ["contact_id"],
        "properties": {
          "contact_id": {
            "type": "string",
            "description": "The ID of the contact",
            "x-dynamic-options": {
              "source": "list_contacts",
              "description": "Fetches available contacts dynamically"
            }
          },
          "limit": {
            "type": "number",
            "description": "Maximum number of deals to retrieve (default: 50, max: 100)",
            "default": 50
          },
          "include_deal_details": {
            "type": "boolean",
            "description": "Include full deal properties like amount, stage, close date, and owner (default: true)",
            "default": true
          },
          "deal_properties": {
            "type": "array",
            "description": "Optional: Specific deal properties to retrieve (e.g., ['dealname', 'amount', 'dealstage', 'closedate'])"
          }
        }
      },
      "rules": {
        "limits": {
          "max_limit": {
            "condition": "limit > 100",
            "action": "block",
            "message": "Limit cannot exceed 100 deals per request. Please use a smaller limit or make multiple requests."
          }
        },
        "confirmations": {}
      },
      "output_schema": {
        "type": "object",
        "description": "Deals associated with a contact",
        "properties": {
          "success": { "type": "boolean", "description": "Whether the request was successful" },
          "data": {
            "type": "object",
            "properties": {
              "contact_id": { "type": "string", "description": "HubSpot contact ID" },
              "deals": {
                "type": "array",
                "description": "Array of associated deals",
                "items": {
                  "type": "object",
                  "properties": {
                    "deal_id": { "type": "string", "description": "Deal ID" },
                    "deal_name": { "type": "string", "description": "Deal name" },
                    "amount": { "type": "string", "description": "Deal amount" },
                    "stage": { "type": "string", "description": "Deal stage" },
                    "close_date": { "type": "string", "description": "Expected close date" },
                    "pipeline": { "type": "string", "description": "Pipeline identifier" },
                    "owner_id": { "type": "string", "description": "HubSpot owner ID" },
                    "created_at": { "type": "string", "description": "Deal creation date" },
                    "properties": { "type": "object", "description": "Additional deal properties" }
                  }
                }
              },
              "total_count": { "type": "integer", "description": "Number of deals" },
              "total_deal_value": { "type": "number", "description": "Sum of all deal amounts" }
            }
          },
          "message": { "type": "string", "description": "Success message" }
        }
      },
      "output_guidance": {
        "success_description": "Returns deals associated with the contact including amounts and stages",
        "sample_output": {
          "success": true,
          "data": {
            "contact_id": "123456",
            "deals": [
              {
                "deal_id": "789",
                "deal_name": "Enterprise License",
                "amount": "50000",
                "stage": "contractsent",
                "close_date": "2025-03-01",
                "pipeline": "default",
                "owner_id": "111"
              }
            ],
            "total_count": 1,
            "total_deal_value": 50000
          },
          "message": "Found 1 deal(s) for this contact"
        },
        "common_errors": {
          "contact_not_found": "Contact ID not found. Verify the contact exists in HubSpot.",
          "no_deals_found": "No deals are associated with this contact.",
          "api_rate_limit": "HubSpot API rate limit exceeded. Please wait a moment and try again.",
          "insufficient_permissions": "Missing required permissions to access deal data."
        }
      }
    },
    "get_contact_activities": {
      "description": "Retrieve recent activities and engagement history for a contact",
      "usage_context": "Use to view interaction timeline including calls, emails, notes, meetings, and tasks. Essential for understanding contact engagement and communication history.",
      "parameters": {
        "type": "object",
        "required": ["contact_id"],
        "properties": {
          "contact_id": {
            "type": "string",
            "description": "The ID of the contact",
            "x-dynamic-options": {
              "source": "list_contacts",
              "description": "Fetches available contacts dynamically"
            }
          },
          "activity_types": {
            "type": "array",
            "description": "Types of activities to retrieve (options: 'calls', 'emails', 'notes', 'meetings', 'tasks'). Default: all types",
            "default": ["calls", "emails", "notes", "meetings", "tasks"]
          },
          "limit": {
            "type": "number",
            "description": "Maximum number of activities to retrieve per type (default: 25, max: 100)",
            "default": 25
          },
          "since_date": {
            "type": "string",
            "description": "Optional: Only retrieve activities after this date (ISO 8601 format: YYYY-MM-DD)"
          }
        }
      },
      "rules": {
        "limits": {
          "max_limit": {
            "condition": "limit > 100",
            "action": "block",
            "message": "Limit cannot exceed 100 activities per type. Please use a smaller limit."
          }
        },
        "confirmations": {}
      },
      "output_schema": {
        "type": "object",
        "description": "Contact activities and engagement history",
        "properties": {
          "success": { "type": "boolean", "description": "Whether the request was successful" },
          "data": {
            "type": "object",
            "properties": {
              "contact_id": { "type": "string", "description": "HubSpot contact ID" },
              "activities": {
                "type": "array",
                "description": "Array of activities sorted by date (newest first)",
                "items": {
                  "type": "object",
                  "properties": {
                    "activity_id": { "type": "string", "description": "Activity ID" },
                    "type": { "type": "string", "description": "Activity type (calls, emails, notes, meetings, tasks)" },
                    "timestamp": { "type": "string", "description": "Activity timestamp" },
                    "owner_id": { "type": "string", "description": "HubSpot owner ID" },
                    "created_at": { "type": "string", "description": "Creation timestamp" },
                    "title": { "type": "string", "description": "Activity title/subject" },
                    "body": { "type": "string", "description": "Activity content/description" }
                  }
                }
              },
              "total_count": { "type": "integer", "description": "Total number of activities" },
              "counts_by_type": { "type": "object", "description": "Activity counts grouped by type" }
            }
          },
          "message": { "type": "string", "description": "Success message" }
        }
      },
      "output_guidance": {
        "success_description": "Returns activities chronologically with counts by type",
        "sample_output": {
          "success": true,
          "data": {
            "contact_id": "123456",
            "activities": [
              {
                "activity_id": "555",
                "type": "emails",
                "timestamp": "2025-01-15T10:30:00.000Z",
                "owner_id": "111",
                "subject": "Follow-up on proposal",
                "direction": "OUTGOING"
              }
            ],
            "total_count": 1,
            "counts_by_type": { "emails": 1 }
          },
          "message": "Found 1 activity for this contact"
        },
        "common_errors": {
          "contact_not_found": "Contact ID not found. Verify the contact exists in HubSpot.",
          "no_activities_found": "No activities found for this contact matching the specified criteria.",
          "invalid_date_format": "Invalid date format. Use ISO 8601 format (YYYY-MM-DD).",
          "api_rate_limit": "HubSpot API rate limit exceeded. Please wait a moment and try again.",
          "insufficient_permissions": "Missing required permissions to access engagement data."
        }
      }
    },
    "search_contacts": {
      "description": "Search for contacts using filters and query terms",
      "usage_context": "Use to find contacts matching specific criteria such as name, email, company, job title, or custom properties. Supports flexible filtering for LLM-driven queries.",
      "parameters": {
        "type": "object",
        "required": [],
        "properties": {
          "query": {
            "type": "string",
            "description": "Search query term (searches across name, email, and company fields)"
          },
          "filters": {
            "type": "object",
            "description": "Property filters as key-value pairs (e.g., {'company': 'Acme Corp', 'lifecyclestage': 'customer'})"
          },
          "limit": {
            "type": "number",
            "description": "Maximum number of contacts to return (default: 25, max: 100)",
            "default": 25
          },
          "properties": {
            "type": "array",
            "description": "Specific properties to retrieve for each contact (e.g., ['firstname', 'lastname', 'email', 'company'])"
          },
          "sort_by": {
            "type": "string",
            "description": "Property to sort results by (e.g., 'createdate', 'lastmodifieddate', 'lastname')"
          },
          "sort_direction": {
            "type": "string",
            "description": "Sort direction: 'ASCENDING' or 'DESCENDING' (default: 'DESCENDING')",
            "default": "DESCENDING"
          }
        }
      },
      "rules": {
        "limits": {
          "max_limit": {
            "condition": "limit > 100",
            "action": "block",
            "message": "Limit cannot exceed 100 contacts per search. Please use a smaller limit or refine your search."
          },
          "requires_criteria": {
            "condition": "query == '' && filters == {}",
            "action": "block",
            "message": "Search requires either a query term or at least one filter. Please provide search criteria."
          }
        },
        "confirmations": {}
      },
      "output_schema": {
        "type": "object",
        "description": "Search results for contacts",
        "properties": {
          "success": { "type": "boolean", "description": "Whether the request was successful" },
          "data": {
            "type": "object",
            "properties": {
              "contacts": {
                "type": "array",
                "description": "Array of matching contacts",
                "items": {
                  "type": "object",
                  "properties": {
                    "contact_id": { "type": "string", "description": "HubSpot contact ID" },
                    "properties": { "type": "object", "description": "Contact properties" },
                    "created_at": { "type": "string", "description": "Contact creation timestamp" },
                    "updated_at": { "type": "string", "description": "Last update timestamp" }
                  }
                }
              },
              "total_count": { "type": "integer", "description": "Number of contacts returned" },
              "has_more": { "type": "boolean", "description": "Whether more results are available" }
            }
          },
          "message": { "type": "string", "description": "Success message" }
        }
      },
      "output_guidance": {
        "success_description": "Returns contacts matching search criteria",
        "sample_output": {
          "success": true,
          "data": {
            "contacts": [
              {
                "contact_id": "123456",
                "properties": {
                  "firstname": "John",
                  "lastname": "Smith",
                  "email": "john@example.com",
                  "company": "Acme Corp"
                },
                "created_at": "2025-01-01T00:00:00.000Z",
                "updated_at": "2025-01-15T00:00:00.000Z"
              }
            ],
            "total_count": 1,
            "has_more": false
          },
          "message": "Found 1 contact(s) matching search criteria"
        },
        "common_errors": {
          "no_results_found": "No contacts found matching the search criteria. Try broadening your search terms or filters.",
          "invalid_filter_property": "One or more filter properties do not exist in HubSpot. Check property names.",
          "invalid_sort_property": "The specified sort property does not exist or cannot be used for sorting.",
          "api_rate_limit": "HubSpot API rate limit exceeded. Please wait a moment and try again.",
          "insufficient_permissions": "Missing required permissions to search contacts."
        }
      }
    },
    "get_deal": {
      "description": "Get detailed information about a specific deal",
      "usage_context": "Use to retrieve comprehensive deal information including amount, stage, close date, associated contacts, companies, and deal properties. Useful for deep-diving into specific opportunities.",
      "parameters": {
        "type": "object",
        "required": ["deal_id"],
        "properties": {
          "deal_id": {
            "type": "string",
            "description": "The ID of the deal to retrieve",
            "x-dynamic-options": {
              "source": "list_deals",
              "description": "Fetches available deals dynamically"
            }
          },
          "properties": {
            "type": "array",
            "description": "Optional: Specific deal properties to retrieve (e.g., ['dealname', 'amount', 'dealstage', 'closedate', 'pipeline'])"
          },
          "include_associations": {
            "type": "boolean",
            "description": "Include associated contacts and companies (default: true)",
            "default": true
          }
        }
      },
      "rules": {
        "limits": {},
        "confirmations": {}
      },
      "output_schema": {
        "type": "object",
        "description": "Detailed deal information with associations",
        "properties": {
          "success": { "type": "boolean", "description": "Whether the request was successful" },
          "data": {
            "type": "object",
            "properties": {
              "deal_id": { "type": "string", "description": "HubSpot deal ID" },
              "properties": { "type": "object", "description": "Deal properties (dealname, amount, dealstage, etc.)" },
              "created_at": { "type": "string", "description": "Deal creation timestamp" },
              "updated_at": { "type": "string", "description": "Last update timestamp" },
              "archived": { "type": "boolean", "description": "Whether the deal is archived" },
              "associations": {
                "type": "object",
                "description": "Associated records (if include_associations=true)",
                "properties": {
                  "contacts": { "type": "array", "description": "Associated contact IDs" },
                  "companies": { "type": "array", "description": "Associated company IDs" }
                }
              }
            }
          },
          "message": { "type": "string", "description": "Success message" }
        }
      },
      "output_guidance": {
        "success_description": "Returns deal information with properties and associations",
        "sample_output": {
          "success": true,
          "data": {
            "deal_id": "789",
            "properties": {
              "dealname": "Enterprise License",
              "amount": "50000",
              "dealstage": "contractsent",
              "closedate": "2025-03-01",
              "pipeline": "default"
            },
            "created_at": "2025-01-01T00:00:00.000Z",
            "updated_at": "2025-01-15T00:00:00.000Z",
            "archived": false,
            "associations": {
              "contacts": [{ "id": "123456" }],
              "companies": [{ "id": "111" }]
            }
          },
          "message": "Deal retrieved successfully"
        },
        "common_errors": {
          "deal_not_found": "Deal ID not found. Verify the deal exists in HubSpot.",
          "invalid_property": "One or more requested properties do not exist. Check property names.",
          "api_rate_limit": "HubSpot API rate limit exceeded. Please wait a moment and try again.",
          "insufficient_permissions": "Missing required permissions to access deal data."
        }
      }
    },
    "create_contact": {
      "description": "Create a new contact in HubSpot CRM",
      "usage_context": "Use to add new contacts to HubSpot when they don't already exist. Essential for lead capture and contact management workflows.",
      "parameters": {
        "type": "object",
        "required": ["email"],
        "properties": {
          "email": {
            "type": "string",
            "description": "Contact email address (required, must be unique)"
          },
          "firstname": {
            "type": "string",
            "description": "Contact first name"
          },
          "lastname": {
            "type": "string",
            "description": "Contact last name"
          },
          "phone": {
            "type": "string",
            "description": "Contact phone number"
          },
          "company": {
            "type": "string",
            "description": "Company name"
          },
          "jobtitle": {
            "type": "string",
            "description": "Job title"
          },
          "website": {
            "type": "string",
            "description": "Company website"
          },
          "lifecyclestage": {
            "type": "string",
            "description": "Lifecycle stage (e.g., 'lead', 'marketingqualifiedlead', 'salesqualifiedlead', 'opportunity', 'customer')"
          },
          "hs_lead_status": {
            "type": "string",
            "description": "Lead status (e.g., 'NEW', 'OPEN', 'IN_PROGRESS', 'CONNECTED', 'UNQUALIFIED')"
          }
        }
      },
      "rules": {
        "limits": {},
        "confirmations": {}
      },
      "output_schema": {
        "type": "object",
        "description": "Created contact information",
        "properties": {
          "success": { "type": "boolean", "description": "Whether the contact was created successfully" },
          "data": {
            "type": "object",
            "properties": {
              "contact_id": { "type": "string", "description": "HubSpot contact ID" },
              "email": { "type": "string", "description": "Contact email" },
              "firstname": { "type": "string", "description": "Contact first name" },
              "lastname": { "type": "string", "description": "Contact last name" },
              "company": { "type": "string", "description": "Company name" },
              "created_at": { "type": "string", "description": "Contact creation timestamp" }
            }
          },
          "message": { "type": "string", "description": "Success message" }
        }
      },
      "output_guidance": {
        "success_description": "Returns created contact with ID and properties",
        "sample_output": {
          "success": true,
          "data": {
            "contact_id": "12345",
            "email": "john.smith@example.com",
            "firstname": "John",
            "lastname": "Smith",
            "company": "Acme Corp",
            "created_at": "2025-01-15T10:30:00.000Z"
          },
          "message": "Contact created successfully"
        },
        "common_errors": {
          "email_already_exists": "Contact with this email already exists in HubSpot.",
          "invalid_email_format": "Email address format is invalid.",
          "missing_required_field": "Email is required to create a contact.",
          "api_rate_limit": "HubSpot API rate limit exceeded. Please wait a moment and try again.",
          "insufficient_permissions": "Missing required permissions to create contacts."
        }
      }
    },
    "create_task": {
      "description": "Create a new task in HubSpot CRM",
      "usage_context": "Use to create follow-up tasks, reminders, or action items associated with contacts, deals, or companies. Essential for workflow automation and task management.",
      "parameters": {
        "type": "object",
        "required": ["subject"],
        "properties": {
          "subject": {
            "type": "string",
            "description": "Task title/subject"
          },
          "body": {
            "type": "string",
            "description": "Task description or notes"
          },
          "status": {
            "type": "string",
            "description": "Task status: 'NOT_STARTED' or 'COMPLETED' (default: 'NOT_STARTED')",
            "default": "NOT_STARTED"
          },
          "priority": {
            "type": "string",
            "description": "Task priority: 'HIGH', 'MEDIUM', or 'LOW' (default: 'MEDIUM')",
            "default": "MEDIUM"
          },
          "due_date": {
            "type": "string",
            "description": "Due date in ISO 8601 format (YYYY-MM-DD) or timestamp"
          },
          "contact_id": {
            "type": "string",
            "description": "Optional: Associate task with a contact ID",
            "x-dynamic-options": {
              "source": "list_contacts",
              "description": "Fetches available contacts dynamically"
            }
          },
          "deal_id": {
            "type": "string",
            "description": "Optional: Associate task with a deal ID",
            "x-dynamic-options": {
              "source": "list_deals",
              "description": "Fetches available deals dynamically"
            }
          },
          "company_id": {
            "type": "string",
            "description": "Optional: Associate task with a company ID",
            "x-dynamic-options": {
              "source": "list_companies",
              "description": "Fetches available companies dynamically"
            }
          },
          "owner_id": {
            "type": "string",
            "description": "Optional: Assign task to a specific HubSpot user ID"
          }
        }
      },
      "rules": {
        "limits": {},
        "confirmations": {}
      },
      "output_schema": {
        "type": "object",
        "description": "Created task information",
        "properties": {
          "success": { "type": "boolean", "description": "Whether the task was created successfully" },
          "data": {
            "type": "object",
            "properties": {
              "task_id": { "type": "string", "description": "HubSpot task ID" },
              "subject": { "type": "string", "description": "Task subject" },
              "status": { "type": "string", "description": "Task status" },
              "priority": { "type": "string", "description": "Task priority" },
              "due_date": { "type": "string", "description": "Task due date" },
              "created_at": { "type": "string", "description": "Task creation timestamp" },
              "associations": { "type": "object", "description": "Associated records" }
            }
          },
          "message": { "type": "string", "description": "Success message" }
        }
      },
      "output_guidance": {
        "success_description": "Returns created task with ID and associations",
        "sample_output": {
          "success": true,
          "data": {
            "task_id": "999",
            "subject": "Follow up with customer",
            "status": "NOT_STARTED",
            "priority": "HIGH",
            "due_date": "2025-01-20",
            "created_at": "2025-01-15T10:30:00.000Z"
          },
          "message": "Task created successfully"
        },
        "common_errors": {
          "invalid_date_format": "Due date must be in ISO 8601 format (YYYY-MM-DD).",
          "contact_not_found": "Contact ID not found. Verify the contact exists.",
          "deal_not_found": "Deal ID not found. Verify the deal exists.",
          "api_rate_limit": "HubSpot API rate limit exceeded. Please wait a moment and try again.",
          "insufficient_permissions": "Missing required permissions to create tasks."
        }
      }
    },
    "create_deal": {
      "description": "Create a new deal in HubSpot CRM",
      "usage_context": "Use to create sales opportunities, revenue opportunities, or pipeline deals. Can associate with contacts and companies. Essential for sales automation workflows.",
      "parameters": {
        "type": "object",
        "required": ["dealname"],
        "properties": {
          "dealname": {
            "type": "string",
            "description": "Name of the deal"
          },
          "amount": {
            "type": "number",
            "description": "Deal amount/value"
          },
          "dealstage": {
            "type": "string",
            "description": "Deal stage (e.g., 'appointmentscheduled', 'qualifiedtobuy', 'presentationscheduled', 'decisionmakerboughtin', 'contractsent', 'closedwon', 'closedlost')"
          },
          "pipeline": {
            "type": "string",
            "description": "Pipeline ID (default: 'default')",
            "default": "default"
          },
          "closedate": {
            "type": "string",
            "description": "Expected close date in ISO 8601 format (YYYY-MM-DD) or timestamp"
          },
          "description": {
            "type": "string",
            "description": "Deal description or notes"
          },
          "contact_id": {
            "type": "string",
            "description": "Optional: Associate deal with a contact ID",
            "x-dynamic-options": {
              "source": "list_contacts",
              "description": "Fetches available contacts dynamically"
            }
          },
          "company_id": {
            "type": "string",
            "description": "Optional: Associate deal with a company ID",
            "x-dynamic-options": {
              "source": "list_companies",
              "description": "Fetches available companies dynamically"
            }
          },
          "owner_id": {
            "type": "string",
            "description": "Optional: Assign deal to a specific HubSpot user ID"
          }
        }
      },
      "rules": {
        "limits": {},
        "confirmations": {}
      },
      "output_schema": {
        "type": "object",
        "description": "Created deal information",
        "properties": {
          "success": { "type": "boolean", "description": "Whether the deal was created successfully" },
          "data": {
            "type": "object",
            "properties": {
              "deal_id": { "type": "string", "description": "HubSpot deal ID" },
              "dealname": { "type": "string", "description": "Deal name" },
              "amount": { "type": "number", "description": "Deal amount" },
              "dealstage": { "type": "string", "description": "Deal stage" },
              "pipeline": { "type": "string", "description": "Pipeline ID" },
              "closedate": { "type": "string", "description": "Expected close date" },
              "created_at": { "type": "string", "description": "Deal creation timestamp" },
              "associations": { "type": "object", "description": "Associated records" }
            }
          },
          "message": { "type": "string", "description": "Success message" }
        }
      },
      "output_guidance": {
        "success_description": "Returns created deal with ID and associations",
        "sample_output": {
          "success": true,
          "data": {
            "deal_id": "888",
            "dealname": "Q1 Upsell Opportunity",
            "amount": 25000,
            "dealstage": "qualifiedtobuy",
            "pipeline": "default",
            "closedate": "2025-03-31",
            "created_at": "2025-01-15T10:30:00.000Z"
          },
          "message": "Deal created successfully"
        },
        "common_errors": {
          "invalid_stage": "Deal stage does not exist in the specified pipeline.",
          "invalid_pipeline": "Pipeline ID not found. Check available pipelines.",
          "contact_not_found": "Contact ID not found. Verify the contact exists.",
          "company_not_found": "Company ID not found. Verify the company exists.",
          "api_rate_limit": "HubSpot API rate limit exceeded. Please wait a moment and try again.",
          "insufficient_permissions": "Missing required permissions to create deals."
        }
      }
    },
    "create_contact_note": {
      "description": "Add a note to a contact's timeline in HubSpot",
      "usage_context": "Use to log important information, conversation summaries, or custom notes to a contact's activity timeline. Useful for documenting interactions and keeping team members informed.",
      "parameters": {
        "type": "object",
        "required": ["contact_id", "note_body"],
        "properties": {
          "contact_id": {
            "type": "string",
            "description": "The ID of the contact to add the note to",
            "x-dynamic-options": {
              "source": "list_contacts",
              "description": "Fetches available contacts dynamically"
            }
          },
          "note_body": {
            "type": "string",
            "description": "The content of the note"
          },
          "note_title": {
            "type": "string",
            "description": "Optional: Note title/subject"
          },
          "owner_id": {
            "type": "string",
            "description": "Optional: HubSpot user ID who created the note"
          }
        }
      },
      "rules": {
        "limits": {},
        "confirmations": {}
      },
      "output_schema": {
        "type": "object",
        "description": "Created note information",
        "properties": {
          "success": { "type": "boolean", "description": "Whether the note was created successfully" },
          "data": {
            "type": "object",
            "properties": {
              "note_id": { "type": "string", "description": "HubSpot note/engagement ID" },
              "contact_id": { "type": "string", "description": "Associated contact ID" },
              "note_body": { "type": "string", "description": "Note content" },
              "created_at": { "type": "string", "description": "Note creation timestamp" },
              "owner_id": { "type": "string", "description": "Note owner ID" }
            }
          },
          "message": { "type": "string", "description": "Success message" }
        }
      },
      "output_guidance": {
        "success_description": "Returns created note with ID and timestamp",
        "sample_output": {
          "success": true,
          "data": {
            "note_id": "777",
            "contact_id": "123456",
            "note_body": "Customer expressed interest in upgrading to premium plan",
            "created_at": "2025-01-15T10:30:00.000Z"
          },
          "message": "Note added successfully"
        },
        "common_errors": {
          "contact_not_found": "Contact ID not found. Verify the contact exists.",
          "empty_note": "Note body cannot be empty.",
          "api_rate_limit": "HubSpot API rate limit exceeded. Please wait a moment and try again.",
          "insufficient_permissions": "Missing required permissions to create notes."
        }
      }
    }
  }
}